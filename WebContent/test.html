<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" href="./static/css/bootstrap.css">
</head>
<body>
  
<script type="text/javascript">
   function getPD(){
        $.ajax({
          type:"post",
          url:"./AddPorjectServlet",
          data:{"a123":"456"},
          dataType : 'json',
          success:function(res){
            alert(res);
          }
        });
    };
    function UploadGroupData(){
        //提交前先对文件进行检查，<input id="file" type="file">
        var file = $("#groupfile")[0].files;//获取上传控件中的文件列表
        if(file.length == 0){//没有指定文件
            alert("请选择文件");
        }
        else if(file.length>1){//文件多于一个，这个根据具体需求，我这里限定只能传一个
            alert("只能上传一个文件");
        }
        else{
            file = file[0];//确定只有一个文件了，取得这个文件对象
            // if(file.type! = "image/png"&&file.type!="image/jpeg"&&file.type!="image/gif"){//检查文件格式，根据具体需求
            //     alert("文件格式错误");
            // }
            if(file.size>1024*500){//检查文件大小，这里限定了文件大小不超过500KB
                alert('文件太大');
            }
            else{
                var formData=new FormData($('#groupData')[0]);//取得表单的所有数据
                document.body.append($("<div id='shadow' style='width:100%;height:100%;"+
                "position:fixed;top:0px;left:0px;background-color:rgba(100,100,100,0.3);"+
                "z-index:"+Number.MAX_SAFE_INTEGER+"'></div>")[0]);
                //执行ajax之前在当前页面加入一个遮罩层，表示正在上传
                $.ajax({
                    url:"./UploadGroupDataExcelFileServlet",
                    method:"post",
                    timeout:5000,
                    data:formData,
                    processData:false,
                    contentType:false,//这两行是上传文件时才需要加的
                    success:function(data){
                        if(data=="ok"){
                            //上传成功
                        }
                        else{
                            alert(data);//打印服务器返回的错误信息
                        }
                    },
                    error:function(data){
                        alert("上传失败");
                    },
                    complete:function(){
                        $("#shadow").remove();//结束时移除遮罩层
                    }
                });
            }
        }
    };

</script>  
当前用户：   
<div>
    <input type="button" id="user" name="user" value="登录" onclick="Bonclick()">
</div>
 
-----------------------------------------------------------------------------------------<br> 
项目添加：<br>   
<form>
  项目名称：<input type="text" id="projectname" name="projectname"><br><br>
  项目描述：<input type="text" id="projectps" name="projectps"><br><br>
是否采用名单命名：
<input type="radio" name="isgroup" id="isgroup1" value="yes" /> 是
<input type="radio" name="isgroup" id="isgroup2" value="no" /> 否<br><br>
<form id="groupData" enctype="multipart/form-data">
    <input id="groupfile" type="file" name="groupfile" style="display:none;"/>
    <input id="groupfilebt" type="button" onclick="UploadGroupData()" value="yes" style="display:none;"/>
</form>
开始时间：
结束时间：


</form>

  <input type="button" id = "tijiao" value="提交" onclick="getPD()">
</form>
-----------------------------------------------------------------------------------------<br>  
<script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="./static/js/bootstrap.js"></script>
<script type="text/javascript">
    var user = document.getElementById('user');
    if("${sessionScope.username}".length == 0 ){
        user.value  = "登录";
    }else{
        user.value  = "${sessionScope.username}";
    }

    function Bonclick(){
        if("${sessionScope.username}".length == 0 ){
            window.location.href="login.jsp";
        }else{
            window.location.href="main.jsp";
        }
    }
    var isgroup = document.getElementsByName("isgroup");
    var seegroupfile = document.getElementById("groupfile");
    var seegroupfilebt = document.getElementById("groupfilebt");
    isgroup[0].onclick=function(){
        if(isgroup[0].value == "yes"){
            //显示group上传
            seegroupfile.style.display="block";
            seegroupfilebt.style.display="block";
        }
    };
    isgroup[1].onclick=function(){
        if(isgroup[1].value == "no"){
            seegroupfile.style.display="none";
            seegroupfilebt.style.display="none";
        }
    };

</script>  
</body>
</html>